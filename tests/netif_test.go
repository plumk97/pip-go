package tests_test

import (
	"encoding/hex"
	"fmt"
	"net"
	"testing"

	pipgo "github.com/plumk97/pip-go"
)

func TestNetif(t *testing.T) {
	if bytes, err := hex.DecodeString("45000132000000004011b912c0a80001ffffffff00430044011e6cda02010600dd2dd93c00000000c0a80064c0a80064000000000000000044291eea599700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000638253633501053604c0a80001330400001c200608c0a80101c0a800010104ffffff000304c0a80001ff"); err == nil {
		pipgo.Input(bytes)
	} else {
		t.Error(err)
	}
}

func init() {
	pipgo.ReceiveUDPDataCallback = func(data []byte, srcIP net.IP, srcPort uint16, dstIP net.IP, dstPort uint16) {
		fmt.Println(data, srcIP, dstIP, srcPort, dstPort)
	}
}
